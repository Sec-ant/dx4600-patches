(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b7eeb24"],{"0243":function(t,e,n){"use strict";n("7e6e")},"135a":function(t,e,n){},"16ea":function(t,e,n){"use strict";n("135a")},"276a":function(t,e,n){"use strict";n("8d0f")},"32ba":function(t,e,n){"use strict";n("d4fd")},"388e":function(t,e,n){"use strict";n("be71")},"4b2b":function(t,e,n){"use strict";n("e4f6")},5320:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-shortcut"},[n("a-form",{attrs:{model:t.formState,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:18}}},[n("a-form-item",{attrs:{label:t.$t("docker.info.addShortcutName"),placeholder:t.$t("docker.info.addShortcutP")}},[n("a-input",{model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}})],1),n("a-form-item",{attrs:{label:t.$t("docker.info.address")}},[n("a-select",{attrs:{placeholder:t.$t("docker.info.selectAddressP")},on:{change:t.handleChange},model:{value:t.formState.action,callback:function(e){t.$set(t.formState,"action",e)},expression:"formState.action"}},[t._l(t.children,(function(e){return n("a-select-option",{key:e.action,attrs:{value:e.action}},[t._v(t._s(e.title))])})),n("a-select-option",{attrs:{value:"custom"}},[t._v(t._s(t.$t("docker.info.customAddress")))])],2),n("a-input",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.formState.action,expression:"formState.action === 'custom'"}],attrs:{placeholder:t.$t("docker.info.addressP")},model:{value:t.formState.address,callback:function(e){t.$set(t.formState,"address",e)},expression:"formState.address"}})],1)],1),n("footer",[n("a-button",{attrs:{type:"grey"},on:{click:t.onClose}},[t._v(t._s(t.$t("action.cancel")))]),n("a-button",{attrs:{type:"primary",disabled:"custom"===t.formState.action&&!t.formState.address||!t.isHTTP||!t.formState.name||!t.formState.action},on:{click:t.onConfirm}},[t._v(t._s(t.$t("action.confirm")))])],1)],1)},i=[],o=n("bc7f"),s={name:"addShortcut",props:{showName:{type:String,default:""},children:{type:Array,default:()=>[]},containerId:{type:String}},data(){return{formState:{name:"",address:"",action:""}}},computed:{isHTTP:function(){let t=/^https?:\/\/\S+(\:\d{1,5})?/;return t.test(this.formState.address)}},mounted(){if(this.children.length<1)return;const t=this.children[0];Object.assign(this.formState,{name:this.showName,address:t.title,action:t.action})},methods:{handleChange(t){if(this.formState.address="","custom"===t)return;const e=this.children.find(e=>e.action===t);this.formState.address=e.title},onConfirm(){const{name:t,address:e}=this.formState,n={name:t,data:{url:e},source:"com.ugreen.ugos.docker",type:1,id:this.containerId.substring(0,10)+"_"+Math.round(180*Math.random()+200)};this.$cloudWindow.useCapacity(o["AppCapacity"].addShortcut,n),this.onClose()},onClose(){this.$emit("close")}}},r=s,c=(n("a61c"),n("2877")),l=Object(c["a"])(r,a,i,!1,null,"b979a1e8",null);e["default"]=l.exports},"64ae":function(t,e,n){},"7e6e":function(t,e,n){},8864:function(t,e,n){"use strict";var a=n("bc7f");e["a"]={port:[a["i18n"].t("docker.container.create.localPort"),a["i18n"].t("docker.container.create.containerPort"),a["i18n"].t("docker.container.create.portType")],port2:[a["i18n"].t("docker.container.create.localPort"),a["i18n"].t("docker.container.create.containerPort"),a["i18n"].t("docker.container.create.portType"),a["i18n"].t("docker.container.create.address")],env:[a["i18n"].t("docker.container.create.envName"),a["i18n"].t("docker.container.create.envValue")],link:[a["i18n"].t("docker.container.create.linkContainer"),a["i18n"].t("docker.container.create.linkLabel")],volume:[a["i18n"].t("docker.volume.name"),a["i18n"].t("docker.volume.drive"),a["i18n"].t("docker.volume.container"),a["i18n"].t("docker.volume.locate"),a["i18n"].t("docker.volume.createTime"),a["i18n"].t("docker.volume.action")],network:[a["i18n"].t("docker.network.name"),a["i18n"].t("docker.network.drive"),a["i18n"].t("docker.network.subnet"),a["i18n"].t("docker.network.gateway")],network2:[a["i18n"].t("docker.network.name"),a["i18n"].t("docker.network.ip"),a["i18n"].t("docker.network.mac")],process:["PID","PPID",a["i18n"].t("docker.container.execCmd"),a["i18n"].t("docker.info.cpuInfo")],log:[a["i18n"].t("docker.log.time"),a["i18n"].t("docker.log.type"),a["i18n"].t("docker.log.log")],storageSpace:[a["i18n"].t("docker.storageSpace.file"),a["i18n"].t("docker.storageSpace.locate"),a["i18n"].t("docker.storageSpace.type")],event:[a["i18n"].t("docker.event.time"),a["i18n"].t("docker.event.type"),a["i18n"].t("docker.event.action")]}},"8d0f":function(t,e,n){},"8db3":function(t,e,n){},9829:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"docker-action-area"},[t.isChildren?t._l(t.list,(function(e,a){return n("span",{key:a},["goService"===e.action&&e.children&&e.children.length>0||"goService"!==e.action?n("button",{staticClass:"action",attrs:{title:e.title,disabled:e.disabled},on:{click:function(n){return n.stopPropagation(),t.itemAction(e)}}},[e.icon?n("span",{staticClass:"icon",class:e.icon}):t._e(),t._v(t._s(e.title)+" ")]):t._e()])})):t._l(t.list,(function(e,a){return n("span",{key:a},[e.children&&e.children.length?[n("a-dropdown",{on:{visibleChange:function(e){return t.hoverChange(e,a)}}},[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},t._l(e.children,(function(e){return n("a-menu-item",{key:e.action,staticClass:"menu",attrs:{disabled:e.disabled},on:{click:function(n){return t.handleChildrenAction(e)}}},[n("div",{staticClass:"item",attrs:{title:e.title}},[t._v(t._s(e.title))])])})),1),n("button",{staticClass:"action",class:{hover:t.menuHoverList[a]},attrs:{title:e.title,disabled:e.disabled}},[e.icon?n("span",{staticClass:"icon",class:e.icon}):t._e(),n("span",{staticClass:"text"},[t._v(" "+t._s(e.title)+" ")]),n("span",{staticClass:"icon arrow icon-btnicon-triangle-down",class:{active:t.menuHoverList[a]}})])],1)]:void 0===e.children?n("button",{staticClass:"action",attrs:{title:e.title,disabled:e.disabled},on:{click:function(n){return n.stopPropagation(),t.itemAction(e)}}},[e.icon?n("span",{staticClass:"icon",class:e.icon}):t._e(),t._v(" "+t._s(e.title)+" ")]):t._e()],2)}))],2)},i=[],o=n("2b0e"),s=o["default"].extend({name:"actionArea",props:{list:{type:Array,default:function(){return[]}},size:{type:String,default:function(){return"large"}},showName:{type:String,default:function(){return""}},containerId:{type:String},isChildren:{type:Boolean,default:function(){return!1}}},data:function(){return{menuHoverList:[]}},beforeMount:function(){var t=this;this.list.forEach((function(){t.menuHoverList.push(!1)}))},methods:{itemAction:function(t){if("goService"!==t.action)return this.$emit("action",t.action,t);this.$modal.create({name:"containerInfo",disabled:!1,title:this.$t("docker.info.addShortcut"),okTitle:this.$t("action.confirm"),showFooterView:!1,component:n("5320"),componentData:{children:t.children,showName:this.showName,containerId:this.containerId}})},handleChildrenAction:function(t){this.$emit("action",t.action,t)},hoverChange:function(t,e){var n=this;this.$nextTick((function(){n.$set(n.menuHoverList,e,t)}))}}}),r=s,c=(n("fefc"),n("2877")),l=Object(c["a"])(r,a,i,!1,null,"4e3b4dd7",null);e["a"]=l.exports},a0d1:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"manage-ability"},[n("div",{staticClass:"ability-desc",domProps:{innerHTML:t._s(t.$t("docker.rootAccess.desc",["<a target=_blank href=https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities>"+t.$t("docker.rootAccess.here")+"</a>"]))}}),n("div",{staticClass:"head-info"},[t._v(t._s(t.$t("docker.rootAccess.customConfig")))]),n("div",{staticClass:"list"},t._l(t.abilityList,(function(e,a){return n("div",{key:a,staticClass:"ability-item",class:{active:e.active}},[n("a-switch",{attrs:{"default-checked":e.default},model:{value:e.active,callback:function(n){t.$set(e,"active",n)},expression:"item.active"}}),n("div",{staticClass:"value",on:{click:function(t){e.active=!e.active}}},[t._v(t._s(e.value))])],1)})),0)])},i=[],o=n("2b0e"),s=n("c9fc"),r=n("2ef0"),c=n.n(r),l=o["default"].extend({name:"manageAbility",data:function(){return{abilityList:c.a.cloneDeep(s["a"].list)}},props:{list:{type:Array,default:function(){return[]}}},beforeMount:function(){this.updateState()},methods:{updateState:function(){var t=this;this.abilityList.forEach((function(e){t.list.includes(e.value)&&(e.active=!0)}))},updateAbility:function(){var t=this.abilityList.reduce((function(t,e){return e.active&&t.push(e.value),t}),[]);this.$emit("message",t)}}}),d=l,u=(n("e0bb"),n("2877")),f=Object(u["a"])(d,a,i,!1,null,"0452ec96",null);e["default"]=f.exports},a61c:function(t,e,n){"use strict";n("8db3")},a951:function(t,e,n){"use strict";var a=n("bc7f");e["a"]=function(){return[{action:"refresh",title:a["i18n"].t("docker.action.refresh"),icon:"icon-reboot"}]}},ab1c:function(t,e,n){},be71:function(t,e,n){},c023:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"help-content"},t._l(t.restartMode,(function(e,a){return n("div",{key:a,staticClass:"restart-mode"},[n("span",{staticClass:"title"},[t._v(t._s(e.name))]),n("span",{staticClass:"value"},[t._v(t._s(e.value))]),n("div",{staticClass:"desc"},[t._v(t._s(e.desc))])])})),0)},i=[],o=n("2b0e"),s=o["default"].extend({name:"restartHelpContent",data:function(){return{restartMode:[{name:this.$t("docker.container.restart.noll"),value:"no",desc:this.$t("docker.container.restart.nollDesc")},{name:this.$t("docker.container.restart.fail"),value:"on-failure",desc:this.$t("docker.container.restart.failDesc")},{name:this.$t("docker.container.restart.always"),value:"always",desc:this.$t("docker.container.restart.alwaysDesc")},{name:this.$t("docker.container.restart.stopped"),value:"unless-stopped",desc:this.$t("docker.container.restart.stoppedDesc")}]}}}),r=s,c=(n("4b2b"),n("2877")),l=Object(c["a"])(r,a,i,!1,null,"0989913c",null);e["default"]=l.exports},c9fc:function(t,e,n){"use strict";var a=n("2ef0"),i=n.n(a);e["a"]={list:[{value:"AUDIT_CONTROL",desc:"Enable and disable kernel auditing; change auditing filter rules; retrieve auditing status and filtering rules.",active:!1,default:!1},{value:"AUDIT_READ",desc:"Allow reading the audit log via multicast netlink socket.",active:!1,default:!1},{value:"AUDIT_WRITE",desc:"Write records to kernel auditing log.",active:!1,default:!0},{value:"CHOWN",desc:"Make arbitrary changes to file UIDs and GIDs (see chown(2)).",active:!1,default:!0},{value:"DAC_OVERRIDE",desc:"Bypass file read, write, and execute permission checks.",active:!1,default:!0},{value:"DAC_READ_SEARCH",desc:"Bypass file read permission checks and directory read and execute permission checks.",active:!1,default:!1},{value:"FOWNER",desc:"Bypass permission checks on operations that normally require the file system UID of the process to match the UID of the file.",active:!1,default:!0},{value:"FSETID",desc:"Don’t clear set-user-ID and set-group-ID permission bits when a file is modified.",active:!1,default:!0},{value:"KILL",desc:"Bypass permission checks for sending signals.",active:!1,default:!0},{value:"LINUX_IMMUTABLE",desc:"Set the FS_APPEND_FL and FS_IMMUTABLE_FL i-node flags.",active:!1,default:!1},{value:"MKNOD",desc:"Create special files using mknod(2).",active:!1,default:!0},{value:"NET_ADMIN",desc:"Perform various network-related operations.",active:!1,default:!1},{value:"NET_BIND_SERVICE",desc:"Bind a socket to internet domain privileged ports (port numbers less than 1024).",active:!1,default:!0},{value:"NET_BROADCAST",desc:"Make socket broadcasts, and listen to multicasts.",active:!1,default:!1},{value:"NET_RAW",desc:"Use RAW and PACKET sockets.",active:!1,default:!0},{value:"SETUID",desc:"Make arbitrary manipulations of process UIDs.",active:!1,default:!0},{value:"SETGID",desc:"Make arbitrary manipulations of process GIDs and supplementary GID list.",active:!1,default:!0},{value:"SYS_ADMIN",desc:"Perform a range of system administration operations.",active:!1,default:!1},{value:"SYS_PTRACE",desc:"Trace arbitrary processes using ptrace(2).",active:!1,default:!1},{value:"SYSLOG",desc:"Perform privileged syslog(2) operations.",active:!1,default:!1}],danger:[{value:"BLOCK_SUSPEND",desc:"Allow preventing system suspends.",active:!1,default:!1},{value:"BPF",desc:"Allow creating BPF maps, loading BPF Type Format (BTF) data, retrieve JITed code of BPF programs, and more.",active:!1,default:!1,unSupport:!0},{value:"PERFMON",desc:"Allow system performance and observability privileged operations using perf_events, i915_perf and other kernel subsystems",active:!1,default:!1,unSupport:!0},{value:"CHECKPOINT_RESTORE",desc:"Allow checkpoint/restore related operations. Introduced in kernel 5.9.",active:!1,default:!1,unSupport:!0},{value:"IPC_LOCK",desc:"Lock memory (mlock(2), mlockall(2), mmap(2), shmctl(2)).",active:!1,default:!1},{value:"IPC_OWNER",desc:"Bypass permission checks for operations on System V IPC objects.",active:!1,default:!1},{value:"LEASE",desc:"Establish leases on arbitrary files (see fcntl(2)).",active:!1,default:!1},{value:"MAC_ADMIN",desc:"Allow MAC configuration or state changes. Implemented for the Smack LSM.",active:!1,default:!1},{value:"MAC_OVERRIDE",desc:"Override Mandatory Access Control (MAC). Implemented for the Smack Linux Security Module (LSM).",active:!1,default:!1},{value:"SETFCAP",desc:"Set file capabilities.",active:!1,default:!0},{value:"SETPCAP",desc:"Modify process capabilities.",active:!1,default:!0},{value:"SYS_BOOT",desc:"Use reboot(2) and kexec_load(2), reboot and load a new kernel for later execution.",active:!1,default:!1},{value:"SYS_CHROOT",desc:"Use chroot(2), change root directory.",active:!1,default:!0},{value:"SYS_MODULE",desc:"Load and unload kernel modules.",active:!1,default:!1},{value:"SYS_NICE",desc:"Raise process nice value (nice(2), setpriority(2)) and change the nice value for arbitrary processes.",active:!1,default:!1},{value:"SYS_PACCT",desc:"Use acct(2), switch process accounting on or off.",active:!1,default:!1},{value:"SYS_RAWIO",desc:"Perform I/O port operations (iopl(2) and ioperm(2)).",active:!1,default:!1},{value:"SYS_RESOURCE",desc:"Override resource Limits.",active:!1,default:!1},{value:"SYS_TIME",desc:"Set system clock (settimeofday(2), stime(2), adjtimex(2)); set real-time (hardware) clock.",active:!1,default:!1},{value:"SYS_TTY_CONFIG",desc:"Use vhangup(2); employ various privileged ioctl(2) operations on virtual terminals.",active:!1,default:!1},{value:"WAKE_ALARM",desc:"Trigger something that will wake up the system.",active:!1,default:!1}],getDangerKey:function(){return this.danger.reduce((function(t,e){return t.push(e.value),t}),[])},getDefaultCap:function(){return this.list.reduce((function(t,e){return e.default&&t.push(e.value),t}),[])},getDropDefaultCap:function(t){for(var e=i.a.cloneDeep(this.getDefaultCap()),n=e.length-1;n>=0;n--)t.includes(e[n])&&e.splice(n,1);return e}}},d4fd:function(t,e,n){},e0bb:function(t,e,n){"use strict";n("ab1c")},e1f7:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-container"},[n("table",{staticClass:"table-panel"},[n("thead",[n("tr",t._l(t.head,(function(e,a){return n("td",{key:a},[t._v(t._s(e))])})),0)]),n("tbody",t._l(t.list,(function(e,a){return n("tr",{key:a,class:{active:t.active===a,odd:t.odd&&(a+2)%2===0},on:{click:function(e){return t.clickSelect(a)}}},[t._t("default",null,{item:e,index:a})],2)})),0)])])},i=[],o=n("2b0e"),s=o["default"].extend({name:"containerTableForm",props:{head:Array,list:Array,active:Number,odd:Boolean},methods:{clickSelect:function(t){this.active===t&&(t=-1),this.$emit("update:active",t)},scrollTo:function(){this.$el.scrollTo({top:0,behavior:"smooth"})}}}),r=s,c=(n("388e"),n("2877")),l=Object(c["a"])(r,a,i,!1,null,"34272fac",null);e["a"]=l.exports},e4f6:function(t,e,n){},f6e7:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-container-modal"},[n("basic-loading",{attrs:{loading:t.loading}}),n("div",{staticClass:"add-body",class:{"no-padding":t.proMode&&2===t.activeStep||t.activeStep===t.totalSteps}},[1===t.activeStep?[t.imageId||t.updateMode?t._e():n("containerForm",{staticClass:"form-item",attrs:{title:t.$t("docker.container.create.selectImage")}},[n("a-select",{staticClass:"image-select",attrs:{placeholder:t.$t("docker.container.create.selectImage"),disabled:t.loadingImage},on:{change:t.imageSelectChange},model:{value:t.containerConfig.Image,callback:function(e){t.$set(t.containerConfig,"Image",e)},expression:"containerConfig.Image"}},t._l(t.imageList,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.ShowName,title:e.ShowName}},[t._v(" "+t._s(e.ShowName)+" ")])})),1)],1),n("containerForm",{staticClass:"form-item",attrs:{title:t.$t("docker.container.create.name")}},[n("a-input",{staticClass:"image-select",attrs:{type:"text",placeholder:t.$t("docker.container.create.name"),disabled:t.updatingName},on:{change:t.checkName},model:{value:t.containerConfig.name,callback:function(e){t.$set(t.containerConfig,"name",e)},expression:"containerConfig.name"}}),t.nameChange?n("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:t.updatingName,disabled:t.updatingName},on:{click:t.updateName}},[t._v("更新")]):t._e()],1),1!==t.activeStep||t.containerId?t._e():n("containerForm",{staticClass:"form-item",attrs:{title:t.$t("docker.container.create.pro")}},[n("a-switch",{attrs:{checked:t.proMode},on:{change:function(e){t.proMode=!t.proMode}}})],1),n("containerForm",{staticClass:"form-item",attrs:{title:t.$t("docker.container.create.limit")}},[n("a-switch",{attrs:{checked:t.enableResourceLimit},on:{change:t.limitChange}})],1),n("containerForm",{staticClass:"form-item",attrs:{title:t.$t("docker.container.create.cpuLimit")}},[n("div",{staticClass:"cpu-range"},[n("a-slider",{staticClass:"slider",attrs:{disabled:!t.enableResourceLimit,min:0,max:1024},on:{change:function(e){return t.limitChange(1)}},model:{value:t.limitData.cpu,callback:function(e){t.$set(t.limitData,"cpu",e)},expression:"limitData.cpu"}}),n("a-input-number",{staticClass:"input",attrs:{disabled:!t.enableResourceLimit,min:0,max:1024},on:{change:function(e){return t.limitChange(1)}},model:{value:t.limitData.cpu,callback:function(e){t.$set(t.limitData,"cpu",e)},expression:"limitData.cpu"}}),n("div",{staticClass:"text"},[t._v(t._s(t.cpuLevel))])],1)]),n("containerForm",{staticClass:"form-item",attrs:{title:t.$t("docker.container.create.memLimit")}},[n("div",{staticClass:"cpu-range"},[n("a-slider",{staticClass:"slider",attrs:{disabled:!t.enableResourceLimit,min:6,max:t.memorySize},on:{change:function(e){return t.limitChange(1)}},model:{value:t.limitData.memory,callback:function(e){t.$set(t.limitData,"memory",e)},expression:"limitData.memory"}}),n("a-input-number",{staticClass:"input",attrs:{disabled:!t.enableResourceLimit,min:6,max:t.memorySize},on:{change:function(e){return t.limitChange(1)}},model:{value:t.limitData.memory,callback:function(e){t.$set(t.limitData,"memory",e)},expression:"limitData.memory"}}),n("div",{staticClass:"text"},[t._v(t._s(t.memoryLevel))])],1)])]:t._e(),t.proMode&&2===t.activeStep?[n("proCreateContainerPanel",{attrs:{activeTab:t.activeTab,config:t.containerConfig,containerId:t.containerId,"read-mode":!1},on:{"update:activeTab":function(e){t.activeTab=e},"update:active-tab":function(e){t.activeTab=e},"update:config":function(e){t.containerConfig=e},disabled:t.disabledChange}})]:t._e(),t.activeStep===t.totalSteps?[n("div",{staticClass:"remark-container"},t._l(t.remark,(function(e,a){return n("div",{key:a,staticClass:"remark-info",class:{line:"object"!==e.type}},[n("div",{staticClass:"info"},[n("span",{staticClass:"name"},[t._v(t._s(e.name)+":")]),"object"===e.type?n("div",{staticClass:"value"},["Env"===e.key?n("containerTableForm",{attrs:{odd:"",head:t.envColumns,list:e.value},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return[n("td",[t._v(t._s(a.label))]),n("td",[t._v(t._s(a.value))])]}}],null,!0)}):"HostConfig.PortBindings"===e.key?n("containerTableForm",{attrs:{odd:"",head:t.portColumns,list:e.value},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return[n("td",{staticClass:"value"},[t._v(t._s(a.public))]),n("td",{staticClass:"value"},[t._v(t._s(a.container))]),n("td",{staticClass:"value"},[t._v(t._s(a.type))])]}}],null,!0)}):t._e()],1):n("span",{staticClass:"value"},[t._v(t._s(e.value))])])])})),0)]:t._e()],2),n("div",{staticClass:"footer-area"},[t.updateMode?t._e():n("a-checkbox",{staticClass:"checkbox",attrs:{disabled:t.loading,checked:t.autoStartContainer},on:{change:function(e){t.autoStartContainer=!t.autoStartContainer}}},[t._v(" "+t._s(t.$t("docker.container.create.finishStart"))+" ")]),n("a-button",{attrs:{type:"grey",disabled:t.loading},on:{click:t.cancelCreate}},[t._v(t._s(t.$t("action.cancel")))]),t.activeStep>1?n("a-button",{attrs:{disabled:t.loading||t.disabled,type:"primary"},on:{click:t.prevStep}},[t._v(t._s(t.$t("action.prev")))]):t._e(),n("a-button",{attrs:{disabled:t.loading||t.disabled||t.disabledNext,loading:t.loading,type:"primary"},on:{click:t.nextStep}},[t._v(t._s(t.buttonText))])],1)],1)},i=[],o=n("9ab4"),s=n("606b"),r=n("2ef0"),c=n.n(r),l=n("2b0e"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-form",class:t.type},[n("div",{staticClass:"form-name"},[t._t("head",(function(){return[t._v(" "+t._s(t.title)+" ")]}))],2),n("div",{staticClass:"form-body"},[t._t("default")],2)])},u=[],f=l["default"].extend({name:"containerForm",props:{title:String,type:{type:String,default:function(){return"block"}}}}),m=f,p=(n("16ea"),n("2877")),h=Object(p["a"])(m,d,u,!1,null,"5acb3aba",null),v=h.exports,g=n("e1f7"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"pro-create-container-panel"},[n("u-tab",{attrs:{select:t.tabSelect},on:{"update:select":function(e){t.tabSelect=e},change:t.tabChange}},[n("section",{key:t.$t("docker.container.create.basic"),attrs:{slot:"proSetting"},slot:"proSetting"},[n("div",{staticClass:"tab-panel"},[n("containerForm",{staticClass:"basic-form",attrs:{title:t.$t("docker.container.create.stdin")}},[n("a-switch",{attrs:{"default-value":!1},model:{value:t.config.OpenStdin,callback:function(e){t.$set(t.config,"OpenStdin",e)},expression:"config.OpenStdin"}})],1),n("containerForm",{staticClass:"basic-form",attrs:{title:t.$t("docker.container.create.tty")}},[n("a-switch",{attrs:{"default-value":!1},model:{value:t.config.Tty,callback:function(e){t.$set(t.config,"Tty",e)},expression:"config.Tty"}})],1),t.supportGpu?n("containerForm",{staticClass:"basic-form",attrs:{title:t.$t("docker.container.create.gpuRender")}},[n("a-switch",{attrs:{"default-value":!1},on:{change:t.gpuRenderChange},model:{value:t.enableGpu,callback:function(e){t.enableGpu=e},expression:"enableGpu"}})],1):t._e(),n("containerForm",{staticClass:"basic-form",attrs:{title:t.$t("docker.container.create.rootAccess")}},[0===t.rootAccessCount?n("span",{staticClass:"access-tips"},[t._v(t._s(t.$t("docker.rootAccess.empty")))]):n("span",{staticClass:"access-tips"},[t._v(" "+t._s(t.$t("docker.rootAccess.opened"))+" "),n("a-popover",[n("template",{slot:"content"},[n("div",{staticClass:"cap-panel"},t._l(t.config.HostConfig.CapAdd,(function(e,a){return n("span",{key:a,staticClass:"item"},[t._v(t._s(e))])})),0)]),n("span",{staticClass:"access-count",on:{click:t.manageAbility}},[t._v(t._s(t.rootAccessCount))])],2),t._v(" "+t._s(t.$t("docker.rootAccess.openCount"))+" ")],1),n("actionArea",{staticStyle:{margin:"0 10px"},attrs:{list:[{title:t.$t("docker.rootAccess.config")}]},on:{action:t.manageAbility}})],1),n("containerForm",{staticClass:"basic-form",attrs:{title:t.$t("docker.container.create.rebootRule")}},[n("a-select",{staticClass:"select-input",attrs:{"default-value":""},on:{change:t.restartChange},model:{value:t.config.HostConfig.RestartPolicy.Name,callback:function(e){t.$set(t.config.HostConfig.RestartPolicy,"Name",e)},expression:"config.HostConfig.RestartPolicy.Name"}},t._l(t.restartMode,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.value,title:(e.value||"no")+"【"+e.name+"】"}},[t._v(" "+t._s(e.name)+" ")])})),1),n("helpArea",{nativeOn:{click:function(e){return t.showRestartHelp.apply(null,arguments)}}})],1),t.isFailRestart?n("containerForm",{staticClass:"basic-form",attrs:{title:t.$t("docker.container.restart.tryCount")}},[n("div",{staticClass:"slider-input"},[n("a-slider",{staticClass:"slider",attrs:{min:0,max:10},model:{value:t.config.HostConfig.RestartPolicy.MaximumRetryCount,callback:function(e){t.$set(t.config.HostConfig.RestartPolicy,"MaximumRetryCount",e)},expression:"config.HostConfig.RestartPolicy.MaximumRetryCount"}}),n("a-input-number",{staticClass:"input",attrs:{min:0,max:10},model:{value:t.config.HostConfig.RestartPolicy.MaximumRetryCount,callback:function(e){t.$set(t.config.HostConfig.RestartPolicy,"MaximumRetryCount",e)},expression:"config.HostConfig.RestartPolicy.MaximumRetryCount"}})],1)]):t._e()],1)]),n("section",{key:t.$t("docker.container.create.network"),attrs:{slot:"network"},slot:"network"},[n("div",{staticClass:"tab-panel"},[n("containerForm",{attrs:{title:t.$t("docker.container.create.networkName")}},[n("a-select",{staticClass:"select-input",attrs:{disabled:t.readMode},on:{change:t.networkChange},model:{value:t.config.HostConfig.NetworkMode,callback:function(e){t.$set(t.config.HostConfig,"NetworkMode",e)},expression:"config.HostConfig.NetworkMode"}},t._l(t.networkList,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.Name}},[t._v(" "+t._s(e.Name)+" ")])})),1)],1)],1)]),n("section",{key:t.$t("docker.container.create.command"),attrs:{slot:"cmd"},slot:"cmd"},[n("div",{staticClass:"tab-panel"},[n("containerForm",{attrs:{title:t.$t("docker.container.create.execCmd")}},[n("div",{staticClass:"command-area"},[n("a-textarea",{staticClass:"textarea",attrs:{spellcheck:"false",disabled:t.readMode},on:{change:t.cmdChange},model:{value:t.cmdText,callback:function(e){t.cmdText=e},expression:"cmdText"}})],1)])],1)]),n("section",{key:t.$t("docker.container.create.space"),attrs:{slot:"space"},slot:"space"},[n("div",{staticClass:"tab-panel style2"},[n("containerForm",{attrs:{type:"line"}},[t.readMode?t._e():n("template",{slot:"head"},[n("action-area",{staticClass:"action-area",attrs:{list:t.spaceAction},on:{action:t.handleAction}}),t.spaceError?n("span",{staticClass:"port-err-info"},[t._v(t._s(t.$t("docker.container.create.spaceError")))]):t._e()],1),n("containerTableForm",{ref:"area",staticClass:"table-container",attrs:{head:t.storageSpaceHead,list:t.spacesInfo,active:t.selectSpaceIndex},on:{"update:active":function(e){t.selectSpaceIndex=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item,i=e.index;return[n("td",[t.readMode?[t._v(t._s(a.ShowSource))]:n("div",{staticClass:"storage-source",on:{click:function(e){return e.stopPropagation(),t.handleAction("editSpace",i)}}},[t._v(" "+t._s(a.ShowSource||t.$t("docker.container.create.auto"))+" ")])],2),n("td",[t.readMode?n("div",{staticClass:"storage-source"},[t._v(" "+t._s(a.Destination)+" ")]):n("a-input",{staticClass:"port-input",attrs:{type:"text",placeholder:t.$t("docker.container.create.placeSpace")},model:{value:a.Destination,callback:function(e){t.$set(a,"Destination",e)},expression:"item.Destination"}})],1),n("td",{staticClass:"storage-type"},[t.readMode?[t._v(t._s(a.showMode))]:n("a-select",{staticClass:"space-select",model:{value:a.Mode,callback:function(e){t.$set(a,"Mode",e)},expression:"item.Mode"}},t._l(t.spaceMode,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])})),1)],2)]}}])}),t.readMode?t._e():n("p",{staticClass:"storage-tips"},[t._v(t._s(t.$t("docker.container.storageTips")))])],2)],1)]),n("section",{key:t.$t("docker.container.create.portSet"),attrs:{slot:"port"},slot:"port"},[n("div",{staticClass:"tab-panel style2"},[n("containerForm",{attrs:{type:"line"}},[t.readMode?t._e():n("template",{slot:"head"},[n("action-area",{staticClass:"action-area",attrs:{list:t.portAction},on:{action:t.handleAction}}),t.portError?n("span",{staticClass:"port-err-info"},[t._v(t._s(t.$t("docker.container.create.portError")))]):t._e()],1),n("containerTableForm",{ref:"area",staticClass:"table-container",attrs:{head:t.portColumns,list:t.portsInfo,active:t.selectPortIndex},on:{"update:active":function(e){t.selectPortIndex=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item,i=e.index;return[n("td",[a.public&&0!==a.public.length?t._e():n("span",{staticClass:"text"},[t._v(t._s(t.$t("docker.container.create.auto")))]),t.readMode||t.isHostNetwork?[t._v(t._s(a.public))]:n("a-input-number",{staticClass:"port-input",attrs:{type:"number",min:1,max:65535},model:{value:a.public,callback:function(e){t.$set(a,"public",e)},expression:"item.public"}})],2),n("td",[t.readMode?[t._v(t._s(a.container))]:n("a-input-number",{staticClass:"port-input",attrs:{type:"number",min:1,placeholder:t.$t("docker.container.create.placePort"),max:65535},on:{change:function(e){return t.portChange(e,i)}},model:{value:a.container,callback:function(e){t.$set(a,"container",e)},expression:"item.container"}})],2),n("td",{staticClass:"port-select"},[t.readMode?[t._v(t._s(a.type))]:n("a-select",{staticClass:"port-select",model:{value:a.type,callback:function(e){t.$set(a,"type",e)},expression:"item.type"}},t._l(t.netWorkType,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e}},[t._v(" "+t._s(e.toUpperCase())+" ")])})),1)],2)]}}])})],2)],1)]),n("section",{key:t.$t("docker.container.create.linkSet"),attrs:{slot:"link"},slot:"link"},[n("div",{staticClass:"tab-panel style2"},[n("containerForm",{attrs:{type:"line"}},[t.readMode?t._e():n("template",{slot:"head"},[n("action-area",{staticClass:"action-area",attrs:{list:t.linkAction},on:{action:t.handleAction}}),t.linkError||!t.containerList.length?n("span",{staticClass:"link-err-info"},[t._v(t._s(t.linkError?t.$t("docker.container.create.linkError1"):t.$t("docker.container.create.linkError2")))]):t._e()],1),n("containerTableForm",{ref:"area",staticClass:"table-container",attrs:{head:t.linkColumns,list:t.linksInfo,active:t.selectLinkIndex},on:{"update:active":function(e){t.selectLinkIndex=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return[n("td",[t.readMode?[t._v(t._s(a.container))]:n("a-select",{staticClass:"link-select",model:{value:a.container,callback:function(e){t.$set(a,"container",e)},expression:"item.container"}},t._l(t.containerList,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.Names[0]}},[t._v(" "+t._s(e.showName)+" ")])})),1)],2),n("td",[t.readMode?[t._v(t._s(a.label))]:n("a-input",{staticClass:"link-select",model:{value:a.label,callback:function(e){t.$set(a,"label",e)},expression:"item.label"}})],2)]}}])})],2)],1)]),n("section",{key:t.$t("docker.container.create.envSet"),attrs:{slot:"env"},slot:"env"},[n("div",{staticClass:"tab-panel style2"},[n("containerForm",{attrs:{type:"line"}},[t.readMode?t._e():n("template",{slot:"head"},[n("action-area",{staticClass:"action-area",attrs:{list:t.envAction},on:{action:t.handleAction}}),t.envError?n("span",{staticClass:"env-err-info"},[t._v(t._s(t.$t("docker.container.create.envError")))]):t._e()],1),n("containerTableForm",{ref:"area",staticClass:"table-container",attrs:{head:t.envColumns,list:t.envInfo,active:t.selectEnvIndex},on:{"update:active":function(e){t.selectEnvIndex=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return[n("td",[t.readMode?[t._v(t._s(a.label))]:n("a-input",{staticClass:"env-input",model:{value:a.label,callback:function(e){t.$set(a,"label",e)},expression:"item.label"}})],2),n("td",[t.readMode?[t._v(t._s(a.value))]:n("a-textarea",{staticClass:"env-input",attrs:{autoSize:"",spellcheck:"false"},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"item.value"}})],2)]}}])})],2)],1)])])],1)},k=[],b=n("0552"),y=n("9829"),S=n("8864"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon docker-help icon-help"})},I=[],$=l["default"].extend({name:"helpArea"}),x=$,D=(n("0243"),Object(p["a"])(x,_,I,!1,null,"b606ce64",null)),E=D.exports,A=n("2f62"),w=n("c9fc"),P=n("bc7f"),M=l["default"].extend({name:"proCreateContainerPanel",components:{containerForm:v,containerTableForm:g["a"],actionArea:y["a"],helpArea:E},props:{config:Object,readMode:{type:Boolean,default:function(){return!1}},containerId:{type:String,default:function(){return""}},activeTab:{type:String,default:function(){return"proSetting"}}},data:function(){return{tabSelect:"proSetting",restartMode:[{value:"",name:this.$t("docker.container.restart.noll")},{value:"on-failure",name:this.$t("docker.container.restart.fail")},{value:"always",name:this.$t("docker.container.restart.always")},{value:"unless-stopped",name:this.$t("docker.container.restart.stopped")}],containerList:[],storageSpaceHead:S["a"].storageSpace,selectSpaceIndex:-1,spacesInfo:[],spaceError:!1,spaceMode:b["a"].volumeModeList,networkList:[],netWorkType:["tcp","udp"],cmdText:"",selectPortIndex:-1,portsInfo:[],portColumns:S["a"].port,portError:!1,selectLinkIndex:-1,linksInfo:[],linkColumns:S["a"].link,linkError:!1,selectEnvIndex:-1,envInfo:[],envColumns:S["a"].env,envError:!1,lastAction:"",enableGpu:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(A["b"])("NasServer",["nasInfo"])),{isFailRestart:function(){return"on-failure"===this.config.HostConfig.RestartPolicy.Name},spaceAction:function(){return[{action:"addSpace",title:this.$t("docker.action.add"),disabled:this.spaceError,type:"primary",icon:"icon-anniutubiao-xinzeng"},{action:"removeSpace",title:this.$t("docker.action.remove"),disabled:-1===this.selectSpaceIndex,type:"primary",icon:"icon-anniutubiao-shanchu"}]},isHostNetwork:function(){return"host"===this.config.HostConfig.NetworkMode},portAction:function(){return[{action:"addPort",title:this.$t("docker.action.add"),disabled:this.portError,type:"primary",icon:"icon-anniutubiao-xinzeng"},{action:"removePort",title:this.$t("docker.action.remove"),disabled:-1===this.selectPortIndex,type:"primary",icon:"icon-anniutubiao-shanchu"}]},linkAction:function(){return[{action:"addLink",title:this.$t("docker.action.add"),disabled:this.linkError||!this.containerList.length,type:"primary",icon:"icon-anniutubiao-xinzeng"},{action:"removeLink",title:this.$t("docker.action.remove"),disabled:-1===this.selectLinkIndex,type:"primary",icon:"icon-anniutubiao-shanchu"}]},envAction:function(){return[{action:"addEnv",title:this.$t("docker.action.add"),disabled:this.envError,type:"primary",icon:"icon-anniutubiao-xinzeng"},{action:"removeEnv",title:this.$t("docker.action.remove"),disabled:-1===this.selectEnvIndex,type:"primary",icon:"icon-anniutubiao-shanchu"}]},supportGpu:function(){return this.$deviceSupport.isSupport(P["FuncModule"].supportGPU)},rootAccessCount:function(){return this.config.HostConfig.CapAdd?this.config.HostConfig.CapAdd.length:0}}),watch:{config:{handler:function(){this.emitChange()},deep:!0},portsInfo:{handler:function(){this.updatePortInfo()},deep:!0},linksInfo:{handler:function(){this.updateLinkInfo()},deep:!0},envInfo:{handler:function(){this.updateEnvInfo()},deep:!0},spacesInfo:{handler:function(){this.updateSpaceInfo()},deep:!0}},mounted:function(){if(this.tabSelect=this.activeTab||"proSetting",this.getNetworkList(),this.getContainerList(),"default"===this.config.HostConfig.NetworkMode&&(this.config.HostConfig.NetworkMode="bridge"),this.portsInfo=b["a"].handlePortData(this.config.HostConfig.PortBindings||{}),this.linksInfo=b["a"].handleLinkData(this.config.HostConfig.Links||[]),this.envInfo=b["a"].handleEnvData(this.config.Env||[]),this.cmdText=b["a"].handleCmdData(this.config.Cmd||[]),this.containerId)this.spacesInfo=b["a"].handleVolumeInfo(this.config.Mounts||[]);else{var t=this.config.HostConfig.Mounts||[];if(Object.values(this.config.Volumes||{}).length){var e=c.a.cloneDeep(this.config.Volumes);delete this.config.Volumes,t=e}this.config.HostConfig.CapAdd=w["a"].getDefaultCap(),this.spacesInfo=b["a"].handleVolumeInfo(t||{})}this.enableGpu=this.config.HostConfig.Devices&&0!==this.config.HostConfig.Devices.length,this.checkErrCap()},methods:{checkErrCap:function(){var t=w["a"].getDangerKey(),e=this.config.HostConfig.CapAdd,n=c.a.intersection(t,e);(c.a.isEqual(e,t)||n.length)&&(this.config.HostConfig.CapAdd=[])},emitChange:function(){this.$emit("update:config",this.config),this.$emit("change",this.config)},emitDisabled:function(t){void 0===t&&(t=!0);var e=this.portError||this.linkError||this.envError||t;this.$emit("disabled",e)},tabChange:function(t){this.tabSelect=t,this.$emit("update:activeTab",t),this.selectPortIndex=-1,this.selectLinkIndex=-1},handleAction:function(t,e){var n=this;switch(this.lastAction=t,t){case"addPort":this.addPort();break;case"removePort":this.removePort();break;case"addLink":this.addLink();break;case"removeLink":this.removeLink();break;case"addEnv":this.addEnv();break;case"removeEnv":this.removeEnv();break;case"addSpace":case"editSpace":"number"===typeof e&&(this.selectSpaceIndex=e),this.$cloudWindow.useCapacity(P["AppCapacity"].selectNasFile,{title:this.$t("action.select"),showAlbum:!1,showDisk:!0,nextChild:!0,showPublic:!1,multiple:!1,canCreFolder:!0,showExtendDisk:!0,canSelectDisk:!0,handleRepeat:!1,showAllType:!0}).then((function(t){n.handleSpaceAction(t)}));break;case"removeSpace":this.removeSpace();break}},gpuRenderChange:function(){this.enableGpu?this.config.HostConfig.Devices=[{CgroupPermissions:"mrw",PathInContainer:"/dev/dri/renderD128",PathOnHost:"/dev/dri/renderD128"},{CgroupPermissions:"mrw",PathInContainer:"/dev/dri/card0",PathOnHost:"/dev/dri/card0"}]:this.config.HostConfig.Devices=[]},rootAccessChange:function(){var t=this;this.config.HostConfig.Privileged&&this.$modal.create({name:"rootAccess",title:this.$t("docker.rootAccess.title"),contentText:this.$t("docker.rootAccess.content"),dismiss:function(e){t.config.HostConfig.Privileged=!1,e()}})},manageAbility:function(){var t=this;this.$modal.create({name:"manageAbility",title:this.$t("docker.rootAccess.config"),component:n("a0d1"),componentData:{list:this.config.HostConfig.CapAdd||[]},modalStyle:{width:"600px",height:"450px"},confirmFunc:"updateAbility",message:function(e){t.config.HostConfig.CapAdd=e}})},restartChange:function(t){"on-failure"!==t&&(this.config.HostConfig.RestartPolicy.MaximumRetryCount=0)},networkChange:function(t){return Object(o["b"])(this,void 0,void 0,(function(){var e;return Object(o["d"])(this,(function(n){switch(n.label){case 0:return e=this.config.HostConfig,[4,b["a"].getPortConfig(this.portsInfo,!1,"host"===t)];case 1:return e.PortBindings=n.sent(),this.portsInfo=b["a"].handlePortData(this.config.HostConfig.PortBindings||{}),[2]}}))}))},getContainerList:function(){var t=this;s["a"].listContainers({all:!0}).then((function(e){t.containerList=e}))},getNetworkList:function(){var t=this;s["a"].listNetworks().then((function(e){t.networkList=e}))},cmdChange:function(){this.config.Cmd=b["a"].getCmdData(this.cmdText)},updateSpaceInfo:function(){var t=this.spacesInfo.some((function(t){return!t.Destination||0!==t.Destination.indexOf("/")||"/"===t.Destination}));if(this.spaceError=t,this.emitDisabled(t),!this.spaceError){var e=b["a"].getVolumeData(this.spacesInfo);this.config.HostConfig.Mounts=e,this.config.Mounts=e}},handleSpaceAction:function(t){if(t[0])return t=t[0],t.location="/mnt/media_rw/"+t.uuid+t.path,"addSpace"===this.lastAction?this.addSpace(t):this.editSpace(t)},addSpace:function(t){var e=t.location;this.spacesInfo.push(b["a"].addVolumeData(e))},editSpace:function(t){this.spacesInfo[this.selectSpaceIndex].Source=t.location,this.spacesInfo[this.selectSpaceIndex].ShowSource=b["a"].handleVolumeShowPath(t.location)},removeSpace:function(){-1!==this.selectSpaceIndex&&this.spacesInfo.splice(this.selectSpaceIndex,1),this.selectSpaceIndex=-1},updatePortInfo:function(){return Object(o["b"])(this,void 0,void 0,(function(){var t,e;return Object(o["d"])(this,(function(n){switch(n.label){case 0:return t=this.portsInfo.some((function(t){return!t.container})),this.portError=t,this.emitDisabled(t),this.portError?[2]:(e=this.config.HostConfig,[4,b["a"].getPortConfig(this.portsInfo)]);case 1:return e.PortBindings=n.sent(),[2]}}))}))},addPort:function(){this.portsInfo.unshift({container:"",public:"",type:"tcp"}),this.selectPortIndex=0,this.scrollToTop()},removePort:function(){-1!==this.selectPortIndex&&this.portsInfo.splice(this.selectPortIndex,1),this.selectPortIndex=-1},portChange:function(t,e){this.isHostNetwork&&(this.portsInfo[e].public=t)},updateLinkInfo:function(){var t=this.linksInfo.some((function(t){return!t.container||!t.label})),e=this.linksInfo.map((function(t){return t.label}));new Set(e).size!==e.length&&(t=!0),this.linkError=t,this.emitDisabled(t),this.linkError||(this.config.HostConfig.Links=b["a"].getLinkConfig(this.linksInfo))},addLink:function(){var t="";this.containerList[0]&&this.containerList[0].Names.length&&(t=this.containerList[0].Names[0]),this.linksInfo.unshift({label:"",container:t}),this.selectLinkIndex=0,this.scrollToTop()},removeLink:function(){-1!==this.selectLinkIndex&&this.linksInfo.splice(this.selectLinkIndex,1),this.selectLinkIndex=-1},updateEnvInfo:function(){var t=this.envInfo.some((function(t){return!t.label})),e=this.envInfo.map((function(t){return t.label}));new Set(e).size!==e.length&&(t=!0),this.envError=t,this.emitDisabled(t),this.envError||(this.config.Env=b["a"].getEnvConfig(this.envInfo))},addEnv:function(){this.envInfo.unshift({label:"",value:""}),this.scrollToTop(),this.selectEnvIndex=0},removeEnv:function(){-1!==this.selectEnvIndex&&this.envInfo.splice(this.selectEnvIndex,1),this.selectEnvIndex=-1},scrollToTop:function(){this.$refs.area.scrollTo({top:0,behavior:"smooth"})},showRestartHelp:function(){this.$modal.create({title:this.$t("docker.container.create.rebootRule"),name:"restartHelp",component:n("c023"),okTitle:this.$t("action.close"),modalStyle:{width:"600px"},cancelTitle:""})}}}),L=M,T=(n("276a"),Object(p["a"])(L,C,k,!1,null,"3d034553",null)),H=T.exports,N=l["default"].extend({name:"containerModal",components:{containerForm:v,containerTableForm:g["a"],proCreateContainerPanel:H},props:{imageId:{type:String,default:function(){return""}},containerId:{type:String,default:function(){return""}}},data:function(){return{loading:!1,autoStartContainer:!1,proMode:!0,activeTab:"",activeStep:1,oldName:"",updatingName:!1,network:null,enableResourceLimit:!1,imageList:[],imageDetail:{RepoTags:[]},loadingImage:!1,limitData:{cpu:0,memory:0},disabled:!1,envColumns:S["a"].env,portColumns:S["a"].port,defaultConfig:{},containerList:[],containerConfig:{name:"",Hostname:"",Domainname:"",User:"",AttachStdin:!1,AttachStdout:!0,AttachStderr:!0,ExposedPorts:{},Tty:!1,OpenStdin:!1,StdinOnce:!1,Env:[],Cmd:[],Healthcheck:{Test:[],Interval:0,Timeout:0,Retries:0,StartPeriod:0},ArgsEscaped:!0,Image:"",Volumes:{},WorkingDir:"",Entrypoint:[],NetworkDisabled:!1,MacAddress:"",OnBuild:[],Labels:{},StopSignal:"SIGTERM",StopTimeout:10,Shell:[],HostConfig:{MaximumIOps:0,MaximumIOBps:0,BlkioWeight:0,BlkioWeightDevice:[],BlkioDeviceReadBps:[],BlkioDeviceWriteBps:[],BlkioDeviceReadIOps:[],BlkioDeviceWriteIOps:[],ContainerIDFile:"",CpusetCpus:"",CpusetMems:"",CpuPercent:0,CpuShares:0,CpuPeriod:0,CpuRealtimePeriod:0,CpuRealtimeRuntime:0,Devices:[],IpcMode:"",Memory:0,MemorySwap:0,MemoryReservation:0,KernelMemory:0,OomKillDisable:!1,OomScoreAdj:500,NetworkMode:"bridge",PidMode:"",PortBindings:{},Privileged:!1,ReadonlyRootfs:!1,PublishAllPorts:!1,GroupAdd:[],RestartPolicy:{Name:"",MaximumRetryCount:0},LogConfig:{},Sysctls:{},Ulimits:[],VolumeDriver:"",ShmSize:67108864,Mounts:[],CapAdd:[],CapDrop:[]},NetworkingConfig:{EndpointsConfig:{}}}}},computed:Object(o["a"])(Object(o["a"])({},Object(A["b"])("docker",["info"])),{totalSteps:function(){return this.proMode?3:2},containerPort:function(){var t=this.containerConfig.HostConfig.PortBindings;return b["a"].handlePortData(t)},remark:function(){var t={name:this.$t("docker.remark.name"),"HostConfig.CpuShares":this.$t("docker.remark.cpu"),"HostConfig.Memory":this.$t("docker.remark.memory"),Entrypoint:"Entrypoint",Cmd:this.$t("docker.remark.cmd"),"HostConfig.PortBindings":this.$t("docker.remark.port"),"HostConfig.NetworkMode":this.$t("docker.remark.network"),Env:this.$t("docker.remark.env")},e=this.getConfigKey(this.containerConfig,t);return e.sort((function(e,n){var a=Object.keys(t),i=a.indexOf(e.key),o=a.indexOf(n.key);return i-o}))},disabledNext:function(){return!this.containerConfig.Image||this.loadingImage},updateMode:function(){return!!this.containerId},automaticName:function(){var t=this,e=this.containerList.filter((function(e){return e.Image===t.containerConfig.Image})),n=b["a"].handleImagesData(this.imageDetail).ShowName,a=n.split("/"),i=a[a.length-1].split(":")[0],o=e.length+1,s=""+i+(1===o?"":o),r=this.containerList;function c(t){var e=r.filter((function(e){return e.showName===t})).length;return e?(o+=e,c(""+i+o)):t}return c(s)},nameChange:function(){return this.containerConfig.name!==this.oldName&&0!==this.oldName.length},buttonText:function(){return this.activeStep===this.totalSteps?this.$t("action.finish"):this.$t("action.next")},memorySize:function(){return Math.round(this.info.MemTotal/1024/1024)},cpuLevel:function(){return b["a"].getCpuLevelText(this.containerConfig.HostConfig.CpuShares)},memoryLevel:function(){return b["a"].getMemoryLevel(this.containerConfig.HostConfig.Memory)}}),created:function(){this.defaultConfig=c.a.cloneDeep(this.containerConfig),this.getContainerList()},mounted:function(){c.a.isEmpty(this.imageId)?this.updateMode?(this.proMode=!0,this.getContainerConfig()):this.getImageList():this.getImageConfig()},methods:{getContainerConfig:function(){var t=this;this.loading=!0,s["a"].getContainer(this.containerId).inspect().then((function(e){e=b["a"].formDetailData(e),t.oldName=e.name||"",t.limitData.cpu=e.HostConfig.CpuShares,t.limitData.memory=e.HostConfig.Memory/1024/1024,0===t.limitData.cpu&&0===t.limitData.memory||(t.enableResourceLimit=!0),t.containerConfig=e})).finally((function(){t.loading=!1}))},getContainerList:function(){var t=this;s["a"].listContainers({all:!0}).then((function(e){t.containerList=e}))},getImageList:function(){var t=this;s["a"].listImages({all:!0}).then((function(e){t.imageList=e}))},imageSelectChange:function(t){this.containerConfig.Image="";var e=this.imageList.filter((function(e){return e.ShowName==t}));this.getImageConfig(e[0].Id)},getImageConfig:function(t){var e=this;void 0===t&&(t=null),this.loadingImage=!0,s["a"].getImage(t||this.imageId).inspect().then((function(t){e.imageDetail=t,Object.assign(e.containerConfig,t.Config),e.containerConfig.Image=b["a"].handleImagesData(t).ShowName,e.containerConfig.name=e.automaticName,e.checkName(),e.containerConfig.HostConfig.PortBindings=t.Config.ExposedPorts||{},e.updatePortInfo(e.containerConfig)})).finally((function(){e.loadingImage=!1}))},limitChange:function(t){1!==t&&(this.enableResourceLimit=!this.enableResourceLimit),this.enableResourceLimit?(this.containerConfig.HostConfig.CpuShares=this.limitData.cpu,this.containerConfig.HostConfig.Memory=1024*this.limitData.memory*1024):(this.containerConfig.HostConfig.CpuShares=0,this.containerConfig.HostConfig.Memory=0)},checkName:function(){this.containerConfig.name=b["a"].replaceName(this.containerConfig.name)},prevStep:function(){1===this.activeStep?this.cancelCreate():this.activeStep--},nextStep:function(){this.activeStep!==this.totalSteps?this.activeStep++:this.requestCreateContainer(c.a.cloneDeep(this.containerConfig))},cancelCreate:function(){this.$emit("close")},updatePortInfo:function(t,e){return void 0===e&&(e=!1),Object(o["b"])(this,void 0,void 0,(function(){var n;return Object(o["d"])(this,(function(a){switch(a.label){case 0:return n=t.HostConfig,[4,b["a"].getPortConfig(this.containerPort,e)];case 1:return n.PortBindings=a.sent(),t.ExposedPorts=b["a"].getExposedPortConfig(t.HostConfig.PortBindings),[2]}}))}))},updateSpaceInfo:function(t){t.HostConfig.Mounts=b["a"].getVolumeData(t.HostConfig.Mounts,!0,!0)},requestCreateContainer:function(t){return Object(o["b"])(this,void 0,void 0,(function(){var e=this;return Object(o["d"])(this,(function(n){switch(n.label){case 0:return this.loading=!0,[4,this.updatePortInfo(t,!0)];case 1:return n.sent(),this.updateSpaceInfo(t),this.updateMode?this.$modal.create({name:"updateContainer",contentText:this.$t("docker.container.updateTips"),confirm:function(n){e.updateContainer(t),n()},dismiss:function(t){e.loading=!1,t()}}):this.createContainer(t),[2]}}))}))},createContainer:function(t){var e=this;delete t.Mounts,t.HostConfig.CapDrop=w["a"].getDropDefaultCap(t.HostConfig.CapAdd||[]);var n=b["a"].getCreateConfig(t,this.defaultConfig);s["a"].createContainer(n).then((function(t){e.containerId?e.$message.success(e.$t("action.actionSuccess")):e.$message.success(e.$t("action.addSuccess")),e.$emit("message","finish"),e.autoStartContainer?e.startContainer(t.id):e.jumpContainersList(),e.cancelCreate()})).catch(b["a"].$errorHandler).finally((function(){e.loading=!1}))},updateContainer:function(t){var e=this;s["a"].getContainer(this.containerId).remove().then((function(){e.createContainer(t)})).catch((function(n){404===n.statusCode?e.createContainer(t):b["a"].$errorHandler(n),e.loading=!1}))},startContainer:function(t){var e=this;s["a"].getContainer(t).start((function(){e.$message.success(e.$t("docker.startSuccess"))})).catch((function(t){b["a"].$errorHandler(t,null,e.$t("docker.action.start"))})).finally((function(){e.loading=!1,e.jumpContainersList()}))},updateName:function(){var t=this;this.updatingName=!0,s["a"].getContainer(this.containerId).rename({name:this.containerConfig.name}).then((function(){t.$message.success(t.$t("docker.renameSuccess")),t.oldName=t.containerConfig.name})).catch(b["a"].$errorHandler).finally((function(){t.updatingName=!1}))},jumpContainersList:function(){this.$router.push({name:"dockerContainers"}),this.$emit("message","finish")},getRemarkData:function(t,e){switch(e){case"HostConfig.CpuShares":return this.cpuLevel;case"HostConfig.Memory":return this.memoryLevel;case"Entrypoint":case"Cmd":return t?b["a"].handleCmdData(t):"";case"HostConfig.PortBindings":return b["a"].handlePortData(t||{},this.$t("docker.remark.auto"));case"Env":return b["a"].handleEnvData(t);default:return t}},getConfigKey:function(t,e,n,a){for(var i in void 0===n&&(n=""),void 0===a&&(a=[]),t){var o=n+i;if("object"===typeof t[i]&&this.getConfigKey(t[i],e,i+".",a),e[o]){var s=this.getRemarkData(t[i],o);c.a.isEmpty(s)||a.push({key:o,name:e[o],value:s,type:typeof s})}}return a},disabledChange:function(t){this.disabled=t}}}),R=N,O=(n("32ba"),Object(p["a"])(R,a,i,!1,null,"fb19bf2a",null));e["default"]=O.exports},fefc:function(t,e,n){"use strict";n("64ae")}}]);